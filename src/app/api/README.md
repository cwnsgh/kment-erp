# API Routes êµ¬ì¡°

ì´ ë””ë ‰í† ë¦¬ëŠ” Next.js App Routerì˜ API Routesë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
api/
â”œâ”€â”€ dev/              # ê°œë°œ/ë””ë²„ê¹…ìš© API
â”‚   â”œâ”€â”€ check-env/    # í™˜ê²½ ë³€ìˆ˜ í™•ì¸
â”‚   â”œâ”€â”€ test-connection/  # DB ì—°ê²° í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ debug-login/  # ë¡œê·¸ì¸ ë””ë²„ê¹…
â”œâ”€â”€ files/            # íŒŒì¼ ê´€ë ¨ API
â”‚   â””â”€â”€ upload/       # íŒŒì¼ ì—…ë¡œë“œ
â””â”€â”€ README.md         # ì´ íŒŒì¼
```

## ğŸ”§ API ëª©ë¡

### ê°œë°œ/ë””ë²„ê¹… API (`/api/dev/`)

#### 1. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
- **ê²½ë¡œ**: `GET /api/dev/check-env`
- **ìš©ë„**: Supabase í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í™•ì¸
- **ì‘ë‹µ**: í™˜ê²½ ë³€ìˆ˜ ì¡´ì¬ ì—¬ë¶€ ë° ë¯¸ë¦¬ë³´ê¸°

#### 2. DB ì—°ê²° í…ŒìŠ¤íŠ¸
- **ê²½ë¡œ**: `GET /api/dev/test-connection`
- **ìš©ë„**: Supabase ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒíƒœ í™•ì¸
- **ì‘ë‹µ**: ì—°ê²° ì„±ê³µ/ì‹¤íŒ¨ ë° ì—ëŸ¬ ì •ë³´

#### 3. ë¡œê·¸ì¸ ë””ë²„ê¹…
- **ê²½ë¡œ**: `GET /api/dev/debug-login?username=admin@kment.co.kr`
- **ìš©ë„**: ë¡œê·¸ì¸ ë¬¸ì œ ì§„ë‹¨ ë° ê³„ì • í™•ì¸
- **ì‘ë‹µ**: ê³„ì • ê²€ìƒ‰ ê²°ê³¼, ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ê²°ê³¼

### íŒŒì¼ ê´€ë¦¬ API (`/api/files/`)

#### 1. íŒŒì¼ ì—…ë¡œë“œ
- **ê²½ë¡œ**: `POST /api/files/upload`
- **ìš©ë„**: í´ë¼ì´ì–¸íŠ¸ ì²¨ë¶€íŒŒì¼ ì—…ë¡œë“œ (ì‚¬ì—…ìë“±ë¡ì¦, ì„œëª… ë“±)
- **ìš”ì²­**: FormData (file, folder)
- **ì‘ë‹µ**: ì—…ë¡œë“œëœ íŒŒì¼ì˜ ê³µê°œ URL

## ğŸ“ ì‚¬ìš© ê°€ì´ë“œ

### íŒŒì¼ ì—…ë¡œë“œ ì˜ˆì‹œ

```typescript
const formData = new FormData();
formData.append('file', file);
formData.append('folder', 'business-registration'); // ë˜ëŠ” 'signature'

const response = await fetch('/api/files/upload', {
  method: 'POST',
  body: formData,
});

const result = await response.json();
// { success: true, url: '...', fileName: '...' }
```

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ê°œë°œ APIëŠ” í”„ë¡œë•ì…˜ì—ì„œ ì œê±°í•˜ê±°ë‚˜ ë³´í˜¸í•´ì•¼ í•©ë‹ˆë‹¤**
2. **íŒŒì¼ ì—…ë¡œë“œëŠ” ìµœëŒ€ 30MBê¹Œì§€ í—ˆìš©ë©ë‹ˆë‹¤**
3. **ëª¨ë“  APIëŠ” Server Actionsë¥¼ ìš°ì„ ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤**

## ğŸ”„ Server Actions vs API Routes

- **Server Actions**: í¼ ì œì¶œ, ë°ì´í„° ë³€ê²½ ë“±ì— ì‚¬ìš© (ê¶Œì¥)
- **API Routes**: íŒŒì¼ ì—…ë¡œë“œ, ì™¸ë¶€ API ì—°ë™ ë“±ì— ì‚¬ìš©





